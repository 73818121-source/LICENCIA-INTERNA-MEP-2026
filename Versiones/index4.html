<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Licencia Interna CONDUCE-MEP</title>
<style>
:root {
  --azul-oscuro: #004d9c;
  --azul-medio: #007bff;
  --naranja: #ff8c00;
  --rojo: #d9534f;
  --gris-fondo: #f5f5f5;
  --verde: #28a745;
}

/* ======== CONFIGURACI칍N GENERAL ======== */
body {
  font-family: Arial, sans-serif;
  background-color: var(--gris-fondo);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 15px;
  padding: 15px;
  font-size: 12px;
  margin: 0;
}

/* Para impresi칩n en tama침o carnet */
@media print {
  body {
    background: white;
    gap: 0;
    padding: 0;
    margin: 0;
  }
  .tarjeta {
    box-shadow: none;
    border: 1px solid #999;
    page-break-after: always;
    margin: 0;
  }
  .no-print {
    display: none;
  }
}

/* ======== TARJETA BASE ======== */
.tarjeta {
  width: 85.6mm; /* Tama침o est치ndar carnet (ID-1) */
  height: 53.98mm;
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  box-sizing: border-box;
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  position: relative;
  font-size: 9px;
}

/* ======== CARA FRONTAL ======== */
.encabezado {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #ccc;
  padding-bottom: 4px;
  gap: 8px;
  margin-bottom: 4px;
}

.logo-espacio {
  width: 25px;
  height: 25px;
  border: 1px solid #ddd;
  border-radius: 3px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #fff;
  flex-shrink: 0;
}
.logo-espacio img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.titulo-area {
  flex: 1;
  border-left: 2px solid var(--azul-oscuro);
  padding-left: 6px;
}
.titulo-area h2 {
  margin: 0;
  font-size: 9px;
  color: var(--azul-oscuro);
  line-height: 1.1;
}
.titulo-area p {
  margin: 0;
  font-size: 7px;
  color: var(--azul-oscuro);
  font-weight: bold;
  border-top: 1px solid var(--azul-oscuro);
  padding-top: 2px;
}

/* ======== CUERPO ======== */
.cuerpo {
  display: flex;
  gap: 6px;
  margin-top: 4px;
  flex: 1;
}

.foto {
  width: 25mm;
  height: 30mm;
  border: 1px solid #333;
  border-radius: 3px;
  overflow: hidden;
  text-align: center;
  background-color: #eee;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 7px;
  flex-shrink: 0;
}
.foto:hover {
  border-color: var(--azul-medio);
}
.foto input {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.foto img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}
.foto .placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #666;
  font-size: 7px;
}
.foto .placeholder i {
  font-size: 10px;
  margin-bottom: 2px;
}

.datos {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.nombre-completo input {
  width: 100%;
  font-size: 10px;
  font-weight: bold;
  color: var(--azul-oscuro);
  border: none;
  border-bottom: 1px solid var(--azul-oscuro);
  margin-bottom: 4px;
  background: none;
  padding: 2px 0;
  height: 12px;
}
.nombre-completo input:focus {
  outline: none;
  border-bottom-color: var(--naranja);
}

.datos-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 2px;
  flex: 1;
}

.campo {
  display: flex;
  align-items: center;
  height: 12px;
}
.campo label {
  width: 45px;
  font-weight: bold;
  color: #444;
  font-size: 7px;
  flex-shrink: 0;
}
.campo input {
  flex: 1;
  border: 1px solid #ccc;
  background-color: #fffde7;
  padding: 1px 2px;
  border-radius: 2px;
  height: 10px;
  font-size: 7px;
}
.campo input:focus {
  outline: none;
  border-color: var(--azul-medio);
}

.caducidad input {
  background-color: var(--rojo);
  color: white;
  font-weight: bold;
  border-color: var(--rojo);
  font-size: 6px;
}
.caducidad-interna input {
  background-color: var(--naranja);
  color: white;
  font-weight: bold;
  border-color: var(--naranja);
  font-size: 6px;
}

/* ======== PIE (OBRA) ======== */
.obra {
  border-top: 1px solid #ccc;
  font-size: 6px;
  text-align: center;
  padding-top: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap; 
  margin-top: 2px;
}
.obra strong {
  margin-right: 3px;
}
.obra input {
  width: 60%;
  margin: 0 3px;
  border: 1px solid #ccc;
  background-color: #fffde7;
  padding: 1px;
  font-size: 6px;
  text-align: center;
  flex-grow: 1;
  height: 8px;
}
.obra .nota-inferior {
  width: 100%;
  margin-top: 2px;
  color: var(--rojo);
  font-weight: bold;
}

/* ======== CARA POSTERIOR ======== */
.cara-posterior h3 {
  background-color: var(--azul-oscuro);
  color: white;
  font-size: 8px;
  text-align: center;
  margin: 0 0 4px 0;
  padding: 3px;
  border-radius: 2px;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 6px;
  margin-bottom: 4px;
}
th, td {
  border: 1px solid #ccc;
  padding: 1px;
  height: 10px;
}
th {
  background-color: var(--azul-medio);
  color: white;
  font-weight: bold;
}
td input {
  width: 100%;
  border: none !important;
  background-color: #fffde7 !important;
  font-size: 6px !important;
  padding: 0 !important;
  height: 8px;
  box-sizing: border-box;
}

/* ======== FIRMAS ======== */
.firmas {
  display: flex;
  justify-content: space-between;
  margin-top: 4px;
}
.firma {
  text-align: center;
  width: 48%;
}
.firma .titulo {
  background-color: var(--azul-medio);
  color: white;
  font-weight: bold;
  padding: 2px;
  border-radius: 2px;
  font-size: 6px;
}
.firma input {
  width: 100%;
  margin-top: 2px;
  border: 1px solid #ccc;
  height: 15px;
  background-color: #fff;
  font-size: 6px;
  text-align: center;
  box-sizing: border-box;
  padding: 1px;
}

/* ======== NOTA ======== */
.nota {
  margin-top: 4px;
  text-align: center;
  font-size: 5px;
  font-weight: bold;
  border-top: 1px solid #ccc;
  padding-top: 2px;
  color: var(--rojo);
}

/* ======== CONTROLES ======== */
.controles {
  display: flex;
  gap: 8px;
  margin-bottom: 15px;
  flex-wrap: wrap;
  justify-content: center;
}

.btn {
  padding: 6px 12px;
  background-color: var(--azul-medio);
  color: white;
  border: none;
  border-radius: 3px;
  cursor: pointer;
  font-size: 12px;
  transition: background-color 0.3s;
}
.btn:hover {
  background-color: var(--azul-oscuro);
}
.btn-imprimir {
  background-color: var(--verde);
}
.btn-imprimir:hover {
  background-color: #218838;
}
.btn-limpiar {
  background-color: var(--rojo);
}
.btn-limpiar:hover {
  background-color: #c9302c;
}

/* Vista previa de impresi칩n */
.vista-previa {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 15px;
}
</style>
</head>

<body>
<div class="controles no-print">
  <button class="btn btn-imprimir" onclick="window.print()">Imprimir Licencia</button>
  <button class="btn btn-limpiar" onclick="limpiarFormulario()">Limpiar Formulario</button>
  <button class="btn" onclick="guardarDatos()">Guardar Datos</button>
  <button class="btn" onclick="cargarDatos()">Cargar Datos</button>
</div>

<div class="vista-previa">
  <!-- Cara frontal -->
  <div class="tarjeta cara-frontal">
    <div class="encabezado">
      <div class="logo-espacio">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjMDA0ZDljIi8+Cjx0ZXh0IHg9IjEyIiB5PSIxNiIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+TU9UQS1FTkdJTDwvdGV4dD4KPC9zdmc+" alt="LOGO Mota Engil">
      </div>
      <div class="titulo-area">
        <h2>LICENCIA INTERNA CONDUCE-MEP</h2>
        <p>츼REA DE CAPACITACI칍N Y ENTRENAMIENTO - EQUIPOS</p>
      </div>
    </div>

    <div class="cuerpo">
      <div class="foto" id="foto-container">
        <input type="file" id="foto-input" accept="image/*">
        <div class="placeholder">
          <i>游닝</i>
          <span>Subir foto</span>
        </div>
        <img id="foto-preview">
      </div>
      <div class="datos">
        <div class="nombre-completo">
          <input type="text" name="nombre_completo" placeholder="NOMBRE COMPLETO DEL OPERADOR">
        </div>
        <div class="datos-grid">
          <div class="campo"><label>DNI:</label><input type="text" name="dni"></div>
          <div class="campo"><label>Emisi칩n:</label><input type="text" name="lic_conducir_emision" placeholder="dd/mm/aaaa"></div>
          <div class="campo"><label>ID Licencia:</label><input type="text" name="licencia_id" placeholder="EQUI-MEP-LIQ-XXX"></div>
          <div class="campo"><label>Lic. Interna:</label><input type="text" name="lic_interna_emision" placeholder="dd/mm/aaaa"></div>
          <div class="campo"><label>Lic. Conducir:</label><input type="text" name="lic_conducir_categoria" placeholder="A-IIIc"></div>
          <div class="campo caducidad"><label>Caducidad:</label><input type="text" name="lic_conducir_caducidad" placeholder="dd/mm/aaaa"></div>
          <div class="campo"><label>Cargo/츼rea:</label><input type="text" name="cargo_area"></div>
          <div class="campo caducidad-interna"><label>Cad. Interna:</label><input type="text" name="lic_interna_caducidad" value="T칠rm. obra"></div>
        </div>
      </div>
    </div>

    <div class="obra">
      <strong>V츼LIDO SOLO PARA LA OBRA:</strong>
      <input type="text" name="obra_valida" placeholder="Nombre de la obra">
      <span class="nota-inferior">OBLIGATORIO SU PORTABILIDAD AL OPERAR UN EQUIPO O VEH칈CULO - MEP</span>
    </div>
  </div>

  <!-- Cara posterior -->
  <div class="tarjeta cara-posterior">
    <h3>LICENCIA INTERNA DE AUTORIZACI칍N DE OPERACI칍N</h3>
    <table>
      <thead>
        <tr><th style="width:20px;">#</th><th>EQUIPO / MARCA / MODELO</th></tr>
      </thead>
      <tbody>
        <tr><td>EQ-01</td><td><input type="text" name="equipo_1"></td></tr>
        <tr><td>EQ-02</td><td><input type="text" name="equipo_2"></td></tr>
        <tr><td>EQ-03</td><td><input type="text" name="equipo_3"></td></tr>
        <tr><td>EQ-04</td><td><input type="text" name="equipo_4"></td></tr>
        <tr><td>EQ-05</td><td><input type="text" name="equipo_5"></td></tr>
        <tr><td>EQ-06</td><td><input type="text" name="equipo_6"></td></tr>
        <tr><td>EQ-07</td><td><input type="text" name="equipo_7"></td></tr>
        <tr><td>EQ-08</td><td><input type="text" name="equipo_8"></td></tr>
      </tbody>
    </table>

    <div class="firmas">
      <div class="firma">
        <div class="titulo">FIRMA DEL TRABAJADOR</div>
        <input type="text" name="firma_trabajador" placeholder="Espacio para R칰brica">
      </div>
      <div class="firma">
        <div class="titulo">RESP. DE LICENCIAS MEP</div>
        <input type="text" name="firma_responsable" placeholder="츼rea de Capacitaci칩n">
      </div>
    </div>

    <div class="nota">
      **REGLA CLAVE:** OBLIGATORIO ENTREGAR LA LICENCIA AL T칄RMINO DEL V칈NCULO CON MEP
    </div>
  </div>
</div>

<script>
// Funci칩n para cargar la foto
document.getElementById('foto-input').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;
  
  // Validar que sea una imagen
  if (!file.type.match('image.*')) {
    alert('Por favor, selecciona un archivo de imagen v치lido.');
    return;
  }
  
  const reader = new FileReader();
  reader.onload = function(ev) {
    const img = document.getElementById('foto-preview');
    img.src = ev.target.result;
    img.style.display = 'block';
    document.querySelector('.foto .placeholder').style.display = 'none';
  };
  reader.readAsDataURL(file);
});

// Funci칩n para limpiar el formulario
function limpiarFormulario() {
  if (confirm('쮼st치s seguro de que deseas limpiar todos los campos?')) {
    // Limpiar todos los inputs
    const inputs = document.querySelectorAll('input');
    inputs.forEach(input => {
      if (input.type !== 'button') {
        input.value = input.name === 'lic_interna_caducidad' ? 'T칠rm. obra' : '';
      }
    });
    
    // Restablecer la foto
    const img = document.getElementById('foto-preview');
    img.style.display = 'none';
    img.src = '';
    document.querySelector('.foto .placeholder').style.display = 'flex';
    document.getElementById('foto-input').value = '';
  }
}

// Funci칩n para guardar datos en localStorage
function guardarDatos() {
  const datos = {};
  const inputs = document.querySelectorAll('input');
  
  inputs.forEach(input => {
    if (input.type !== 'file' && input.type !== 'button') {
      datos[input.name] = input.value;
    }
  });
  
  // Guardar la foto si existe
  const img = document.getElementById('foto-preview');
  if (img.src) {
    datos.foto = img.src;
  }
  
  localStorage.setItem('licenciaMEP', JSON.stringify(datos));
  alert('Datos guardados correctamente.');
}

// Funci칩n para cargar datos desde localStorage
function cargarDatos() {
  const datosGuardados = localStorage.getItem('licenciaMEP');
  
  if (!datosGuardados) {
    alert('No hay datos guardados.');
    return;
  }
  
  const datos = JSON.parse(datosGuardados);
  
  // Cargar datos en los inputs
  Object.keys(datos).forEach(key => {
    if (key !== 'foto') {
      const input = document.querySelector(`input[name="${key}"]`);
      if (input) {
        input.value = datos[key];
      }
    }
  });
  
  // Cargar la foto si existe
  if (datos.foto) {
    const img = document.getElementById('foto-preview');
    img.src = datos.foto;
    img.style.display = 'block';
    document.querySelector('.foto .placeholder').style.display = 'none';
  }
  
  alert('Datos cargados correctamente.');
}

// Cargar datos autom치ticamente al cargar la p치gina
window.addEventListener('DOMContentLoaded', cargarDatos);
</script>
</body>
</html>
